<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <link rel="icon" type="image/png" href="https://alpha-datavillage.herokuapp.com/img/favicon.ico">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
 <title>DataVillage - Profitez de vos données personnelles</title>
  <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no' name='viewport' />
  <!--     Fonts and icons     -->
  <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons" />
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css">
  <!-- CSS Files -->
  <link href="https://alpha-datavillage.herokuapp.com/css/material-kit.css?v=2.0.4" rel="stylesheet" />
</head>

<body class="login-page sidebar-collapse">
  <div class="page-header header-filter" style="background-image: url('https://source.unsplash.com/McIrFk1i5eg/1600x900'); background-size: cover; background-position: top center;">
    <div class="container">
      <div class="row">
        <div class="col-lg-4 col-md-6 ml-auto mr-auto">
          <div class="card card-login">
            <form onsubmit="return false;" method="post">
              <div class="card-header card-header-primary text-center">
                <h4 class="card-title">Se connecter</h4>
                <div class="social-line">
                  <a href="#pablo" id="btn-google" class="btn btn-just-icon btn-link">
                    <i class="fa fa-google"></i>
                  </a>
                  <a href="#pablo" id="btn-microsoft" class="btn btn-just-icon btn-link">
                    <i class="fa fa-windows"></i>
                  </a>
                </div>
              </div>
              <div id="error-message" class="alert"></div>
              <p class="description text-center">Permière connection?</p>
              <div class="card-body">
                <div class="form-check">
                    <label class="form-check-label">
                        <input class="form-check-input" type="radio" name="podRadios" id="podRadiosGoogle" value="google" checked> Google drive 
                        <span class="circle">
                          <span class="check"></span>
                        </span>
                    </label>
                </div>
                <div class="form-check">
                    <label class="form-check-label">
                        <input class="form-check-input" type="radio" name="podRadios" id="podRadiosMicrosoft" value="microsoft"> Microsoft One drive
                        <span class="circle">
                        <span class="check"></span>
                        </span>
                    </label>
                </div>
                <div class="form-check disabled">
                    <label class="form-check-label">
                        <input class="form-check-input" type="radio" name="podRadios" id="podRadiosDropbox" value="dropbox" disabled> Dropbox
                        <span class="circle">
                        <span class="check"></span>
                        </span>
                    </label>
                </div>
                <div class="form-check disabled">
                    <label class="form-check-label">
                        <input class="form-check-input" type="radio" name="podRadios" id="podRadiosSolid" value="solid" disabled> Solid
                        <span class="circle">
                        <span class="check"></span>
                        </span>
                    </label>
                </div>
                <div class="input-group">
                      <button type="submit" id="btn-signup" class="btn btn-primary btn-block">Activer mon Pod</button>
                </div>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
   <!--[if IE 8]>
  <script src="//cdnjs.cloudflare.com/ajax/libs/ie8/0.2.5/ie8.js"></script>
  <![endif]-->

  <!--[if lte IE 9]>
  <script src="https://cdn.auth0.com/js/polyfills/1.0/base64.min.js"></script>
  <script src="https://cdn.auth0.com/js/polyfills/1.0/es5-shim.min.js"></script>
  <![endif]-->

  <script src="https://cdn.auth0.com/js/auth0/9.2/auth0.min.js"></script>
  <script src="https://cdn.auth0.com/js/polyfills/1.0/object-assign.min.js"></script>
  <script>
    window.addEventListener('load', function() {

      var config = JSON.parse(
        decodeURIComponent(escape(window.atob('@@config@@')))
      );

      var params = Object.assign({
        /* additional configuration needed for use of custom domains
        overrides: {
          __tenant: config.auth0Tenant,
          __token_issuer: 'YOUR_CUSTOM_DOMAIN'
        }, */
        domain: config.auth0Domain,
        clientID: config.clientID,
        redirectUri: config.callbackURL,
        responseType: 'code'
      }, config.internalOptions);

      var webAuth = new auth0.WebAuth(params);

      var databaseConnection = 'Username-Password-Authentication';

      function login(e) {
        e.preventDefault();
        var username = document.getElementById('email').value;
        var password = document.getElementById('password').value;
        webAuth.login({
          realm: databaseConnection,
          username: username,
          password: password
        }, function(err) {
          if (err) displayError(err);
        });
      }

      function signup() {
        var email = document.getElementById('email').value;
        var password = document.getElementById('password').value;

        webAuth.redirect.signupAndLogin({
          connection: databaseConnection,
          email: email,
          password: password
        }, function(err) {
          if (err) displayError(err);
        });
      }

      function loginWithGoogle() {
        webAuth.authorize({
          connection: 'google-oauth2'
        }, function(err) {
          if (err) displayError(err);
        });
      }

      function loginWithMicrosoft() {
        webAuth.authorize({
          connection: 'windowslive'
        }, function(err) {
          if (err) displayError(err);
        });
      }

      function displayError(err) {
        var errorMessage = document.getElementById('error-message');
        errorMessage.innerHTML = err.description;
        errorMessage.style.display = 'block';
      }

      document.getElementById('btn-signup').addEventListener('click', loginWithGoogle);
      document.getElementById('podRadiosGoogle').addEventListener('click', document.getElementById('btn-signup').addEventListener('click', loginWithGoogle));
      document.getElementById('podRadiosMicrosoft').addEventListener('click', document.getElementById('btn-signup').addEventListener('click', loginWithMicrosoft));
      document.getElementById('btn-google').addEventListener('click', loginWithGoogle);
      document.getElementById('btn-microsoft').addEventListener('click', loginWithMicrosoft);
    });
  </script>
</body>
</html>


